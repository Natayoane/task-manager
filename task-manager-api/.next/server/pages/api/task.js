"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/task";
exports.ids = ["pages/api/task"];
exports.modules = {

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "moment":
/*!*************************!*\
  !*** external "moment" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("moment");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "(api)/./middlewares/connectDb.ts":
/*!**********************************!*\
  !*** ./middlewares/connectDb.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"connectDb\": () => (/* binding */ connectDb)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst connectDb = (handler)=>async (req, res)=>{\n        console.log(\"MongoDb readystate\", (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connections[0].readyState));\n        if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().connections[0].readyState)) {\n            return handler(req, res);\n        }\n        const { DB_CONNECTION_STRING  } = process.env;\n        if (!DB_CONNECTION_STRING) {\n            return res.status(500).json({\n                error: \"ENV Database connection n\\xe3o informada\"\n            });\n        }\n        await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(DB_CONNECTION_STRING);\n        mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on(\"connected\", ()=>console.log(\"Conectado ao DB\")\n        );\n        mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on(\"error\", (error)=>console.log(\"Ocorreu erro ao conectar no DB\" + error)\n        );\n        return handler(req, res);\n    }\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9taWRkbGV3YXJlcy9jb25uZWN0RGIudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ2dDO0FBR3pCLE1BQU1DLFNBQVMsR0FBRyxDQUFDQyxPQUF3QixHQUM5QyxPQUFPQyxHQUFvQixFQUFFQyxHQUF5QyxHQUFLO1FBRTNFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRU4sMkVBQWtDLENBQUMsQ0FBQztRQUN0RSxJQUFHQSwyRUFBa0MsRUFBQztZQUNsQyxPQUFPRSxPQUFPLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxDQUFDLENBQUM7U0FDNUI7UUFFRCxNQUFNLEVBQUNLLG9CQUFvQixHQUFDLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRztRQUMxQyxJQUFHLENBQUNGLG9CQUFvQixFQUFDO1lBQ3JCLE9BQU9MLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7Z0JBQUVDLEtBQUssRUFBRywwQ0FBdUM7YUFBQyxDQUFDLENBQUM7U0FDbkY7UUFFRCxNQUFNZCx1REFBZ0IsQ0FBQ1Msb0JBQW9CLENBQUMsQ0FBQztRQUM3Q1QsNkRBQXNCLENBQUMsV0FBVyxFQUFFLElBQU1LLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlCQUFpQixDQUFDO1FBQUEsQ0FBQyxDQUFDO1FBQzFFTiw2REFBc0IsQ0FBQyxPQUFPLEVBQUVjLENBQUFBLEtBQUssR0FBSVQsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0NBQWdDLEdBQUdRLEtBQUssQ0FBQztRQUFBLENBQUMsQ0FBQztRQUVoRyxPQUFPWixPQUFPLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxDQUFDLENBQUM7S0FDNUI7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2dlcmVuY2lhZG9yLXRhcmVmYXMtODdhb2ovLi9taWRkbGV3YXJlcy9jb25uZWN0RGIudHM/MGM2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7TmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSwgTmV4dEFwaUhhbmRsZXJ9IGZyb20gJ25leHQnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IERlZmF1bHRSZXNwb25zZU1zZyB9IGZyb20gJy4uL3R5cGVzL0RlZmF1bHRSZXNwb25zZU1zZyc7XG5cbmV4cG9ydCBjb25zdCBjb25uZWN0RGIgPSAoaGFuZGxlciA6IE5leHRBcGlIYW5kbGVyKSA9PiBcbiAgICBhc3luYyAocmVxIDogTmV4dEFwaVJlcXVlc3QsIHJlcyA6IE5leHRBcGlSZXNwb25zZTxEZWZhdWx0UmVzcG9uc2VNc2c+KSA9PiB7XG5cbiAgICBjb25zb2xlLmxvZygnTW9uZ29EYiByZWFkeXN0YXRlJywgbW9uZ29vc2UuY29ubmVjdGlvbnNbMF0ucmVhZHlTdGF0ZSk7XG4gICAgaWYobW9uZ29vc2UuY29ubmVjdGlvbnNbMF0ucmVhZHlTdGF0ZSl7XG4gICAgICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKTtcbiAgICB9XG5cbiAgICBjb25zdCB7REJfQ09OTkVDVElPTl9TVFJJTkd9ID0gcHJvY2Vzcy5lbnY7XG4gICAgaWYoIURCX0NPTk5FQ1RJT05fU1RSSU5HKXtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3IgOiBcIkVOViBEYXRhYmFzZSBjb25uZWN0aW9uIG7Do28gaW5mb3JtYWRhXCJ9KTtcbiAgICB9XG5cbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KERCX0NPTk5FQ1RJT05fU1RSSU5HKTtcbiAgICBtb25nb29zZS5jb25uZWN0aW9uLm9uKCdjb25uZWN0ZWQnLCAoKSA9PiBjb25zb2xlLmxvZygnQ29uZWN0YWRvIGFvIERCJykpO1xuICAgIG1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Vycm9yJywgZXJyb3IgPT4gY29uc29sZS5sb2coJ09jb3JyZXUgZXJybyBhbyBjb25lY3RhciBubyBEQicgKyBlcnJvcikpO1xuXG4gICAgcmV0dXJuIGhhbmRsZXIocmVxLCByZXMpO1xufSJdLCJuYW1lcyI6WyJtb25nb29zZSIsImNvbm5lY3REYiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwiY29ubmVjdGlvbnMiLCJyZWFkeVN0YXRlIiwiREJfQ09OTkVDVElPTl9TVFJJTkciLCJwcm9jZXNzIiwiZW52Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29ubmVjdCIsImNvbm5lY3Rpb24iLCJvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./middlewares/connectDb.ts\n");

/***/ }),

/***/ "(api)/./middlewares/jwtValidator.ts":
/*!*************************************!*\
  !*** ./middlewares/jwtValidator.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"jwtValidator\": () => (/* binding */ jwtValidator)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nconst jwtValidator = (handler)=>async (req, res)=>{\n        const { MY_SECRET_KEY  } = process.env;\n        if (!MY_SECRET_KEY) {\n            return res.status(500).json({\n                error: \"ENV SECRET KEY n\\xe3o informada na execu\\xe7\\xe3o do projeto\"\n            });\n        }\n        if (!req || !req.headers) {\n            return res.status(400).json({\n                error: \"N\\xe3o foi poss\\xedvel validar o token de seguran\\xe7a\"\n            });\n        }\n        if (req.method !== \"OPTIONS\") {\n            try {\n                const authorization = req.headers[\"authorization\"];\n                if (!authorization) {\n                    return res.status(400).json({\n                        error: \"N\\xe3o foi poss\\xedvel validar o token de seguran\\xe7a\"\n                    });\n                }\n                const token = authorization.substr(7);\n                if (!token) {\n                    return res.status(400).json({\n                        error: \"Token de seguran\\xe7a n\\xe3o informado\"\n                    });\n                }\n                const decode = await jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, MY_SECRET_KEY);\n                if (!decode) {\n                    return res.status(400).json({\n                        error: \"N\\xe3o foi poss\\xedvel validar o token de seguran\\xe7a\"\n                    });\n                }\n                if (req.body) {\n                    req.body.userId = decode._id;\n                } else if (req.query) {\n                    req.query.userId = decode._id;\n                }\n            } catch (e) {\n                return res.status(400).json({\n                    error: \"N\\xe3o foi poss\\xedvel validar o token de seguran\\xe7a\"\n                });\n            }\n        }\n        return handler(req, res);\n    }\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9taWRkbGV3YXJlcy9qd3RWYWxpZGF0b3IudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRytDO0FBRXhDLE1BQU1DLFlBQVksR0FBRyxDQUFDQyxPQUF3QixHQUNqRCxPQUFPQyxHQUFvQixFQUFFQyxHQUF5QyxHQUFLO1FBRTNFLE1BQU0sRUFBQ0MsYUFBYSxHQUFDLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRztRQUNuQyxJQUFHLENBQUNGLGFBQWEsRUFBQztZQUNkLE9BQU9ELEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7Z0JBQUNDLEtBQUssRUFBRyw4REFBcUQ7YUFBSSxDQUFDLENBQUM7U0FDaEc7UUFFSixJQUFHLENBQUNQLEdBQUcsSUFBSSxDQUFDQSxHQUFHLENBQUNRLE9BQU8sRUFBQztZQUNwQixPQUFPUCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO2dCQUFDQyxLQUFLLEVBQUcsd0RBQStDO2FBQUksQ0FBQyxDQUFDO1NBQzFGO1FBRUosSUFBR1AsR0FBRyxDQUFDUyxNQUFNLEtBQUssU0FBUyxFQUFDO1lBQ3hCLElBQUc7Z0JBQ0MsTUFBTUMsYUFBYSxHQUFHVixHQUFHLENBQUNRLE9BQU8sQ0FBQyxlQUFlLENBQUM7Z0JBQ2xELElBQUcsQ0FBQ0UsYUFBYSxFQUFDO29CQUNkLE9BQU9ULEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7d0JBQUNDLEtBQUssRUFBRyx3REFBK0M7cUJBQUksQ0FBQyxDQUFDO2lCQUMxRjtnQkFFSixNQUFNSSxLQUFLLEdBQUdELGFBQWEsQ0FBQ0UsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDckMsSUFBRyxDQUFDRCxLQUFLLEVBQUM7b0JBQ04sT0FBT1YsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQzt3QkFBQ0MsS0FBSyxFQUFHLHdDQUFrQztxQkFBRyxDQUFDLENBQUM7aUJBQzdFO2dCQUVILE1BQU1NLE1BQU0sR0FBRyxNQUFNaEIsMERBQVUsQ0FBQ2MsS0FBSyxFQUFFVCxhQUFhLENBQUM7Z0JBQ3JELElBQUcsQ0FBQ1csTUFBTSxFQUFDO29CQUNQLE9BQU9aLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7d0JBQUNDLEtBQUssRUFBRyx3REFBK0M7cUJBQUksQ0FBQyxDQUFDO2lCQUMxRjtnQkFFSixJQUFHUCxHQUFHLENBQUNlLElBQUksRUFBQztvQkFDUmYsR0FBRyxDQUFDZSxJQUFJLENBQUNDLE1BQU0sR0FBR0gsTUFBTSxDQUFDSSxHQUFHLENBQUM7aUJBQ2hDLE1BQUssSUFBR2pCLEdBQUcsQ0FBQ2tCLEtBQUssRUFBQztvQkFDZmxCLEdBQUcsQ0FBQ2tCLEtBQUssQ0FBQ0YsTUFBTSxHQUFHSCxNQUFNLENBQUNJLEdBQUcsQ0FBQztpQkFDakM7YUFDSixRQUFNRSxDQUFDLEVBQUM7Z0JBQ0wsT0FBT2xCLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7b0JBQUNDLEtBQUssRUFBRyx3REFBK0M7aUJBQUMsQ0FBQyxDQUFDO2FBQzFGO1NBQ0o7UUFFRCxPQUFPUixPQUFPLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxDQUFDLENBQUM7S0FDNUI7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2dlcmVuY2lhZG9yLXRhcmVmYXMtODdhb2ovLi9taWRkbGV3YXJlcy9qd3RWYWxpZGF0b3IudHM/NGNjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7TmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSwgTmV4dEFwaUhhbmRsZXJ9IGZyb20gJ25leHQnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IERlZmF1bHRSZXNwb25zZU1zZyB9IGZyb20gJy4uL3R5cGVzL0RlZmF1bHRSZXNwb25zZU1zZyc7XG5pbXBvcnQgand0LCB7IEp3dFBheWxvYWQgfSBmcm9tICdqc29ud2VidG9rZW4nO1xuXG5leHBvcnQgY29uc3Qgand0VmFsaWRhdG9yID0gKGhhbmRsZXIgOiBOZXh0QXBpSGFuZGxlcikgPT4gXG4gICAgYXN5bmMgKHJlcSA6IE5leHRBcGlSZXF1ZXN0LCByZXMgOiBOZXh0QXBpUmVzcG9uc2U8RGVmYXVsdFJlc3BvbnNlTXNnPikgPT4ge1xuXG4gICAgY29uc3Qge01ZX1NFQ1JFVF9LRVl9ID0gcHJvY2Vzcy5lbnY7XG4gICAgaWYoIU1ZX1NFQ1JFVF9LRVkpe1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe2Vycm9yIDogJ0VOViBTRUNSRVQgS0VZIG7Do28gaW5mb3JtYWRhIG5hIGV4ZWN1w6fDo28gZG8gcHJvamV0byd9KTtcbiAgICB9XG5cbiAgICBpZighcmVxIHx8ICFyZXEuaGVhZGVycyl7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7ZXJyb3IgOiAnTsOjbyBmb2kgcG9zc8OtdmVsIHZhbGlkYXIgbyB0b2tlbiBkZSBzZWd1cmFuw6dhJ30pO1xuICAgIH1cblxuICAgIGlmKHJlcS5tZXRob2QgIT09ICdPUFRJT05TJyl7XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb24gPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xuICAgICAgICAgICAgaWYoIWF1dGhvcml6YXRpb24pe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7ZXJyb3IgOiAnTsOjbyBmb2kgcG9zc8OtdmVsIHZhbGlkYXIgbyB0b2tlbiBkZSBzZWd1cmFuw6dhJ30pO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhdXRob3JpemF0aW9uLnN1YnN0cig3KTtcbiAgICAgICAgICAgIGlmKCF0b2tlbil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtlcnJvciA6ICdUb2tlbiBkZSBzZWd1cmFuw6dhIG7Do28gaW5mb3JtYWRvJ30pO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgY29uc3QgZGVjb2RlID0gYXdhaXQgand0LnZlcmlmeSh0b2tlbiwgTVlfU0VDUkVUX0tFWSkgYXMgSnd0UGF5bG9hZDtcbiAgICAgICAgICAgIGlmKCFkZWNvZGUpe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7ZXJyb3IgOiAnTsOjbyBmb2kgcG9zc8OtdmVsIHZhbGlkYXIgbyB0b2tlbiBkZSBzZWd1cmFuw6dhJ30pO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYocmVxLmJvZHkpe1xuICAgICAgICAgICAgICAgIHJlcS5ib2R5LnVzZXJJZCA9IGRlY29kZS5faWQ7XG4gICAgICAgICAgICB9ZWxzZSBpZihyZXEucXVlcnkpe1xuICAgICAgICAgICAgICAgIHJlcS5xdWVyeS51c2VySWQgPSBkZWNvZGUuX2lkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9Y2F0Y2goZSl7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe2Vycm9yIDogJ07Do28gZm9pIHBvc3PDrXZlbCB2YWxpZGFyIG8gdG9rZW4gZGUgc2VndXJhbsOnYSd9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKTtcbn0iXSwibmFtZXMiOlsiand0Iiwiand0VmFsaWRhdG9yIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIk1ZX1NFQ1JFVF9LRVkiLCJwcm9jZXNzIiwiZW52Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiaGVhZGVycyIsIm1ldGhvZCIsImF1dGhvcml6YXRpb24iLCJ0b2tlbiIsInN1YnN0ciIsImRlY29kZSIsInZlcmlmeSIsImJvZHkiLCJ1c2VySWQiLCJfaWQiLCJxdWVyeSIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./middlewares/jwtValidator.ts\n");

/***/ }),

/***/ "(api)/./models/TaskModel.ts":
/*!*****************************!*\
  !*** ./models/TaskModel.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TaskModel\": () => (/* binding */ TaskModel)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst TaskSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    name: {\n        type: String,\n        required: true\n    },\n    userId: {\n        type: String,\n        required: true\n    },\n    previsionDate: {\n        type: Date,\n        required: true\n    },\n    finishDate: {\n        type: Date,\n        required: false\n    }\n});\nconst TaskModel = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models.tasks) || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"tasks\", TaskSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvVGFza01vZGVsLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwQztBQUUxQyxNQUFNRSxVQUFVLEdBQUcsSUFBSUQsNENBQU0sQ0FBQztJQUMxQkUsSUFBSSxFQUFHO1FBQUNDLElBQUksRUFBR0MsTUFBTTtRQUFFQyxRQUFRLEVBQUUsSUFBSTtLQUFDO0lBQ3RDQyxNQUFNLEVBQUc7UUFBQ0gsSUFBSSxFQUFHQyxNQUFNO1FBQUVDLFFBQVEsRUFBRyxJQUFJO0tBQUM7SUFDekNFLGFBQWEsRUFBRztRQUFDSixJQUFJLEVBQUdLLElBQUk7UUFBRUgsUUFBUSxFQUFFLElBQUk7S0FBQztJQUM3Q0ksVUFBVSxFQUFHO1FBQUNOLElBQUksRUFBR0ssSUFBSTtRQUFFSCxRQUFRLEVBQUUsS0FBSztLQUFDO0NBQzlDLENBQUM7QUFFSyxNQUFNSyxTQUFTLEdBQUlYLDhEQUFxQixJQUN4Q0EscURBQWMsQ0FBQyxPQUFPLEVBQUVFLFVBQVUsQ0FBQyxDQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2VyZW5jaWFkb3ItdGFyZWZhcy04N2Fvai8uL21vZGVscy9UYXNrTW9kZWwudHM/YTdhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UsIHtTY2hlbWF9IGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgVGFza1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICAgIG5hbWUgOiB7dHlwZSA6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxuICAgIHVzZXJJZCA6IHt0eXBlIDogU3RyaW5nLCByZXF1aXJlZCA6IHRydWV9LFxuICAgIHByZXZpc2lvbkRhdGUgOiB7dHlwZSA6IERhdGUsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICBmaW5pc2hEYXRlIDoge3R5cGUgOiBEYXRlLCByZXF1aXJlZDogZmFsc2V9XG59KTtcblxuZXhwb3J0IGNvbnN0IFRhc2tNb2RlbCA9IChtb25nb29zZS5tb2RlbHMudGFza3MgXG4gICAgfHwgbW9uZ29vc2UubW9kZWwoJ3Rhc2tzJywgVGFza1NjaGVtYSkpOyJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsIlRhc2tTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidXNlcklkIiwicHJldmlzaW9uRGF0ZSIsIkRhdGUiLCJmaW5pc2hEYXRlIiwiVGFza01vZGVsIiwibW9kZWxzIiwidGFza3MiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./models/TaskModel.ts\n");

/***/ }),

/***/ "(api)/./pages/api/task.ts":
/*!***************************!*\
  !*** ./pages/api/task.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _middlewares_connectDb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../middlewares/connectDb */ \"(api)/./middlewares/connectDb.ts\");\n/* harmony import */ var _middlewares_jwtValidator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../middlewares/jwtValidator */ \"(api)/./middlewares/jwtValidator.ts\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ \"moment\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _models_TaskModel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../models/TaskModel */ \"(api)/./models/TaskModel.ts\");\n\n\n\n\nconst taskEndpoint = async (req, res)=>{\n    const { userId  } = req?.body || req?.query;\n    switch(req.method){\n        case \"POST\":\n            return await saveTask(req, res, userId);\n        case \"PUT\":\n            return await updateTask(req, res, userId);\n        case \"DELETE\":\n            return await deleteTask(req, res, userId);\n        case \"GET\":\n            return await getTasks(req, res, userId);\n        default:\n            return res.status(405).json({\n                error: \"Metodo infomado n\\xe3o \\xe9 valido\"\n            });\n    }\n};\nconst validateBody = (body, userId)=>{\n    if (!userId) {\n        return \"Usuario n\\xe3o informado\";\n    }\n    if (!body.name || body.name.length < 2) {\n        return \"Nome inv\\xe1lido\";\n    }\n    if (!body.previsionDate) {\n        return \"Data inv\\xe1lida\";\n    }\n};\nconst saveTask = async (req, res, userId)=>{\n    const body = req.body;\n    const errorMsg = validateBody(body, userId);\n    if (errorMsg) {\n        return res.status(400).json({\n            error: errorMsg\n        });\n    }\n    const previsionDate = moment__WEBPACK_IMPORTED_MODULE_2___default()(body.previsionDate);\n    const now = moment__WEBPACK_IMPORTED_MODULE_2___default()();\n    now.set({\n        hour: 0,\n        minute: 0,\n        second: 0,\n        millisecond: 0\n    });\n    if (previsionDate.isBefore(now)) {\n        return res.status(400).json({\n            error: \"Data n\\xe3o pode ser menor que hoje\"\n        });\n    }\n    const task = {\n        name: body.name,\n        userId,\n        previsionDate: previsionDate.toDate()\n    };\n    await _models_TaskModel__WEBPACK_IMPORTED_MODULE_3__.TaskModel.create(task);\n    return res.status(200).json({\n        msg: \"Tarefa Criada\"\n    });\n};\nconst updateTask = async (req, res, userId)=>{\n    const body = req.body;\n    const taskId = req?.query?.id;\n    if (!taskId) {\n        return res.status(400).json({\n            error: \"Tarefa n\\xe3o informada\"\n        });\n    }\n    const task = await _models_TaskModel__WEBPACK_IMPORTED_MODULE_3__.TaskModel.findById(taskId);\n    if (!task || task.userId !== userId) {\n        return res.status(400).json({\n            error: \"Tarefa n\\xe3o encontrada\"\n        });\n    }\n    const errorMsg = validateBody(body, userId);\n    if (errorMsg) {\n        return res.status(400).json({\n            error: errorMsg\n        });\n    }\n    const previsionDate = moment__WEBPACK_IMPORTED_MODULE_2___default()(body.previsionDate);\n    task.name = body.name;\n    task.previsionDate = previsionDate;\n    task.finishDate = body.finishDate ? moment__WEBPACK_IMPORTED_MODULE_2___default()(body.finishDate) : null;\n    await _models_TaskModel__WEBPACK_IMPORTED_MODULE_3__.TaskModel.findByIdAndUpdate({\n        _id: task._id\n    }, task);\n    return res.status(200).json({\n        msg: \"Tarefa Alterada\"\n    });\n};\nconst deleteTask = async (req, res, userId)=>{\n    const taskId = req?.query?.id;\n    if (!taskId) {\n        return res.status(400).json({\n            error: \"Tarefa n\\xe3o informada\"\n        });\n    }\n    const task = await _models_TaskModel__WEBPACK_IMPORTED_MODULE_3__.TaskModel.findById(taskId);\n    if (!task || task.userId !== userId) {\n        return res.status(400).json({\n            error: \"Tarefa n\\xe3o encontrada\"\n        });\n    }\n    await _models_TaskModel__WEBPACK_IMPORTED_MODULE_3__.TaskModel.findByIdAndDelete({\n        _id: task._id\n    });\n    return res.status(200).json({\n        msg: \"Tarefa Deletada\"\n    });\n};\nconst getTasks = async (req, res, userId)=>{\n    const params = req.query;\n    const query = {\n        userId\n    };\n    if (params?.previsionDateStart) {\n        const startDate = moment__WEBPACK_IMPORTED_MODULE_2___default()(params?.previsionDateStart).toDate();\n        query.previsionDate = {\n            $gte: startDate\n        };\n    }\n    if (params?.previsionDateEnd) {\n        const endDate = moment__WEBPACK_IMPORTED_MODULE_2___default()(params?.previsionDateEnd).toDate();\n        if (!query.previsionDate) {\n            query.previsionDate = {};\n        }\n        query.previsionDate.$lte = endDate;\n    }\n    if (params?.status) {\n        const status = parseInt(params?.status);\n        switch(status){\n            case 1:\n                query.finishDate = null;\n                break;\n            case 2:\n                query.finishDate = {\n                    $ne: null\n                };\n        }\n    }\n    const result = await _models_TaskModel__WEBPACK_IMPORTED_MODULE_3__.TaskModel.find(query);\n    return res.status(200).json(result);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_middlewares_connectDb__WEBPACK_IMPORTED_MODULE_0__.connectDb)((0,_middlewares_jwtValidator__WEBPACK_IMPORTED_MODULE_1__.jwtValidator)(taskEndpoint)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBRyxDQUFDUyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ2tDLE1BQU0sQ0FBQyxDQUFDO0NBQ3ZDO0FBRUQsaUVBQWVsRCxpRUFBUyxDQUFDQyx1RUFBWSxDQUFDRyxZQUFZLENBQUMsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2VyZW5jaWFkb3ItdGFyZWZhcy04N2Fvai8uL3BhZ2VzL2FwaS90YXNrLnRzPzRjYWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBEZWZhdWx0UmVzcG9uc2VNc2cgfSBmcm9tICcuLi8uLi90eXBlcy9EZWZhdWx0UmVzcG9uc2VNc2cnO1xuaW1wb3J0IHsgY29ubmVjdERiIH0gZnJvbSAnLi4vLi4vbWlkZGxld2FyZXMvY29ubmVjdERiJztcbmltcG9ydCB7IGp3dFZhbGlkYXRvciB9IGZyb20gJy4uLy4uL21pZGRsZXdhcmVzL2p3dFZhbGlkYXRvcic7XG5pbXBvcnQgeyBUYXNrUmVxdWVzdCB9IGZyb20gJy4uLy4uL3R5cGVzL1Rhc2tSZXF1ZXN0JztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IFRhc2tNb2RlbCB9IGZyb20gJy4uLy4uL21vZGVscy9UYXNrTW9kZWwnO1xuaW1wb3J0IHsgR2V0VGFza3NQYXJhbXMgfSBmcm9tICcuLi8uLi90eXBlcy9HZXRUYXNrc1BhcmFtcyc7XG5cbmNvbnN0IHRhc2tFbmRwb2ludCA9IGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZTxEZWZhdWx0UmVzcG9uc2VNc2cgfCBhbnk+KSA9PiB7XG5cbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxPy5ib2R5IHx8IHJlcT8ucXVlcnk7XG5cbiAgICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcbiAgICAgICAgY2FzZSAnUE9TVCc6XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2F2ZVRhc2socmVxLCByZXMsIHVzZXJJZCk7XG4gICAgICAgIGNhc2UgJ1BVVCc6XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdXBkYXRlVGFzayhyZXEsIHJlcywgdXNlcklkKTtcbiAgICAgICAgY2FzZSAnREVMRVRFJzpcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBkZWxldGVUYXNrKHJlcSwgcmVzLCB1c2VySWQpO1xuICAgICAgICBjYXNlICdHRVQnOlxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGdldFRhc2tzKHJlcSwgcmVzLCB1c2VySWQpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRvZG8gaW5mb21hZG8gbsOjbyDDqSB2YWxpZG8nIH0pO1xuICAgIH1cbn1cblxuY29uc3QgdmFsaWRhdGVCb2R5ID0gKGJvZHkgOiBUYXNrUmVxdWVzdCwgdXNlcklkIDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuICdVc3VhcmlvIG7Do28gaW5mb3JtYWRvJztcbiAgICB9XG5cbiAgICBpZiAoIWJvZHkubmFtZSB8fCBib2R5Lm5hbWUubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gJ05vbWUgaW52w6FsaWRvJztcbiAgICB9XG5cbiAgICBpZiAoIWJvZHkucHJldmlzaW9uRGF0ZSkge1xuICAgICAgICByZXR1cm4gJ0RhdGEgaW52w6FsaWRhJztcbiAgICB9XG59XG5cbmNvbnN0IHNhdmVUYXNrID0gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlLCB1c2VySWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGJvZHkgPSByZXEuYm9keSBhcyBUYXNrUmVxdWVzdDtcblxuICAgIGNvbnN0IGVycm9yTXNnID0gdmFsaWRhdGVCb2R5KGJvZHksIHVzZXJJZCk7XG4gICAgaWYoZXJyb3JNc2cpe1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogZXJyb3JNc2cgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcHJldmlzaW9uRGF0ZSA9IG1vbWVudChib2R5LnByZXZpc2lvbkRhdGUpO1xuICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuICAgIG5vdy5zZXQoeyBob3VyOiAwLCBtaW51dGU6IDAsIHNlY29uZDogMCwgbWlsbGlzZWNvbmQ6IDAgfSlcbiAgICBpZiAocHJldmlzaW9uRGF0ZS5pc0JlZm9yZShub3cpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnRGF0YSBuw6NvIHBvZGUgc2VyIG1lbm9yIHF1ZSBob2plJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB0YXNrID0ge1xuICAgICAgICBuYW1lOiBib2R5Lm5hbWUsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgcHJldmlzaW9uRGF0ZTogcHJldmlzaW9uRGF0ZS50b0RhdGUoKVxuICAgIH1cblxuICAgIGF3YWl0IFRhc2tNb2RlbC5jcmVhdGUodGFzayk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbXNnOiAnVGFyZWZhIENyaWFkYScgfSk7XG59XG5cbmNvbnN0IHVwZGF0ZVRhc2sgPSBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHVzZXJJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgYm9keSA9IHJlcS5ib2R5IGFzIFRhc2tSZXF1ZXN0O1xuXG4gICAgY29uc3QgdGFza0lkID0gcmVxPy5xdWVyeT8uaWQ7XG4gICAgaWYgKCF0YXNrSWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdUYXJlZmEgbsOjbyBpbmZvcm1hZGEnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHRhc2sgPSBhd2FpdCBUYXNrTW9kZWwuZmluZEJ5SWQodGFza0lkKTtcbiAgICBpZighdGFzayB8fCB0YXNrLnVzZXJJZCAhPT0gdXNlcklkKXtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdUYXJlZmEgbsOjbyBlbmNvbnRyYWRhJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBlcnJvck1zZyA9IHZhbGlkYXRlQm9keShib2R5LCB1c2VySWQpO1xuICAgIGlmKGVycm9yTXNnKXtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IGVycm9yTXNnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHByZXZpc2lvbkRhdGUgPSBtb21lbnQoYm9keS5wcmV2aXNpb25EYXRlKTtcbiAgICBcbiAgICB0YXNrLm5hbWUgPSBib2R5Lm5hbWU7XG4gICAgdGFzay5wcmV2aXNpb25EYXRlID0gcHJldmlzaW9uRGF0ZTtcbiAgICB0YXNrLmZpbmlzaERhdGUgPSBib2R5LmZpbmlzaERhdGUgPyBtb21lbnQoYm9keS5maW5pc2hEYXRlKSA6IG51bGw7XG5cbiAgICBhd2FpdCBUYXNrTW9kZWwuZmluZEJ5SWRBbmRVcGRhdGUoeyBfaWQ6IHRhc2suX2lkfSwgdGFzayk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbXNnOiAnVGFyZWZhIEFsdGVyYWRhJyB9KTtcbn1cblxuY29uc3QgZGVsZXRlVGFzayA9IGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSwgdXNlcklkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB0YXNrSWQgPSByZXE/LnF1ZXJ5Py5pZDtcbiAgICBpZiAoIXRhc2tJZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1RhcmVmYSBuw6NvIGluZm9ybWFkYScgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdGFzayA9IGF3YWl0IFRhc2tNb2RlbC5maW5kQnlJZCh0YXNrSWQpO1xuICAgIGlmKCF0YXNrIHx8IHRhc2sudXNlcklkICE9PSB1c2VySWQpe1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1RhcmVmYSBuw6NvIGVuY29udHJhZGEnIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IFRhc2tNb2RlbC5maW5kQnlJZEFuZERlbGV0ZSh7IF9pZDogdGFzay5faWR9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtc2c6ICdUYXJlZmEgRGVsZXRhZGEnIH0pO1xufVxuXG5jb25zdCBnZXRUYXNrcyA9IGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSwgdXNlcklkOiBzdHJpbmcpID0+IHtcbiAgIFxuICAgIGNvbnN0IHBhcmFtcyA9ICByZXEucXVlcnkgYXMgR2V0VGFza3NQYXJhbXM7XG5cbiAgICBjb25zdCBxdWVyeSA9IHtcbiAgICAgICAgdXNlcklkXG4gICAgfSBhcyBhbnk7XG5cbiAgICBpZihwYXJhbXM/LnByZXZpc2lvbkRhdGVTdGFydCl7XG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG1vbWVudChwYXJhbXM/LnByZXZpc2lvbkRhdGVTdGFydCkudG9EYXRlKCk7XG4gICAgICAgIHF1ZXJ5LnByZXZpc2lvbkRhdGUgPSB7JGd0ZSA6IHN0YXJ0RGF0ZX07XG4gICAgfVxuXG4gICAgaWYocGFyYW1zPy5wcmV2aXNpb25EYXRlRW5kKXtcbiAgICAgICAgY29uc3QgZW5kRGF0ZSA9IG1vbWVudChwYXJhbXM/LnByZXZpc2lvbkRhdGVFbmQpLnRvRGF0ZSgpO1xuICAgICAgICBcbiAgICAgICAgaWYoIXF1ZXJ5LnByZXZpc2lvbkRhdGUpe1xuICAgICAgICAgICAgcXVlcnkucHJldmlzaW9uRGF0ZSA9IHt9XG4gICAgICAgIH1cblxuICAgICAgICBxdWVyeS5wcmV2aXNpb25EYXRlLiRsdGUgPSBlbmREYXRlO1xuICAgIH1cblxuICAgIGlmKHBhcmFtcz8uc3RhdHVzKXtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gcGFyc2VJbnQocGFyYW1zPy5zdGF0dXMpO1xuICAgICAgICBzd2l0Y2goc3RhdHVzKXtcbiAgICAgICAgICAgIGNhc2UgMSA6IHF1ZXJ5LmZpbmlzaERhdGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyIDogcXVlcnkuZmluaXNoRGF0ZSA9IHskbmUgOiBudWxsfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFRhc2tNb2RlbC5maW5kKHF1ZXJ5KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdERiKGp3dFZhbGlkYXRvcih0YXNrRW5kcG9pbnQpKTsiXSwibmFtZXMiOlsiY29ubmVjdERiIiwiand0VmFsaWRhdG9yIiwibW9tZW50IiwiVGFza01vZGVsIiwidGFza0VuZHBvaW50IiwicmVxIiwicmVzIiwidXNlcklkIiwiYm9keSIsInF1ZXJ5IiwibWV0aG9kIiwic2F2ZVRhc2siLCJ1cGRhdGVUYXNrIiwiZGVsZXRlVGFzayIsImdldFRhc2tzIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwidmFsaWRhdGVCb2R5IiwibmFtZSIsImxlbmd0aCIsInByZXZpc2lvbkRhdGUiLCJlcnJvck1zZyIsIm5vdyIsInNldCIsImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJtaWxsaXNlY29uZCIsImlzQmVmb3JlIiwidGFzayIsInRvRGF0ZSIsImNyZWF0ZSIsIm1zZyIsInRhc2tJZCIsImlkIiwiZmluZEJ5SWQiLCJmaW5pc2hEYXRlIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJfaWQiLCJmaW5kQnlJZEFuZERlbGV0ZSIsInBhcmFtcyIsInByZXZpc2lvbkRhdGVTdGFydCIsInN0YXJ0RGF0ZSIsIiRndGUiLCJwcmV2aXNpb25EYXRlRW5kIiwiZW5kRGF0ZSIsIiRsdGUiLCJwYXJzZUludCIsIiRuZSIsInJlc3VsdCIsImZpbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/task.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/task.ts"));
module.exports = __webpack_exports__;

})();